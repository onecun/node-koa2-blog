{% extends 'views/base.html' %}
{% block style %}
<link rel="stylesheet" href="create.css">
{% endblock %}
{% block body %}
<form action="/posts/new" method="POST">
    <header class="editor-header">
        <input name="title" class="input is-shadowless is-radiusless"  autofocus="autofocus" type="text" placeholder="输入文章标题...">
        <div class="right-box">
            <button type="submit" class="button is-small is-primary">发布</button>
        </div>
    </header>
    <div id="editor">
        <textarea name="content" class="input" name="content" placeholder="输入内容..."></textarea>
        <div class="show content markdown-body"></div>
    </div>
</form>
{% block script %}
<script crossorigin="anonymous" integrity="sha384-9bkP/CtE8rvBG0oqbZBIPHS/nNKbIKxm96KBRITeZlqqqIdGTETzv4yocK+P0fY4" src="https://lib.baomitu.com/marked/0.6.2/marked.min.js"></script>
<script>
    const e = (sel) => {
        return document.querySelector(sel)
    }
    const bindEvent = (name, ele, callback) => {
        ele.addEventListener(name, callback)
    }
    let input = e('#editor .input')
    let show = e('#editor .show')
    show.innerHTML = marked(input.value)
    bindEvent('input', input, () => {
        show.innerHTML = marked(input.value)
    })
</script>
{% endblock %}
{% endblock %}